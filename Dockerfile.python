ARG url=localhost:30500/trtllm:put-your-version
FROM $url AS trtllm-builder

COPY python.patch /app/tensorrt_llm/python.patch
RUN patch -p1 -i/app/tensorrt_llm/python.patch -d/usr/local/lib/python3.12/dist-packages
COPY extra-llm-api-config.yml /app/tensorrt_llm
ENTRYPOINT ["/bin/bash", "-c", "exec \"$@\"", "--", "/usr/local/bin/trtllm-serve", "."]
